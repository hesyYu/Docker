# Docker

### ë„ì»¤ë€? ì»¨í…Œì´ë„ˆë¥¼ ê´€ë¦¬í•˜ëŠ” ë„êµ¬!

- 2013ë…„ Docker ì‚¬ì—ì„œ  Go ì–¸ì–´ë¡œ ê°œë°œí•œ ì˜¤í”ˆì†ŒìŠ¤ í”Œë«í¼ì´ë‹¤.
- Dockerë¥¼ ì‚¬ìš©í•˜ë©´ ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ë” ì‰½ê²Œ ê´€ë¦¬í•˜ê³  ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤.

    ![Docker%2037809b0820314ded83cc46681297fd48/Untitled.png](Docker%2037809b0820314ded83cc46681297fd48/Untitled.png)

- ë„ì»¤ì˜ íŠ¹ì§•
    1. ì„œë²„ë¥¼ ì½”ë“œ í˜•íƒœë¡œ ì •ì˜
    2. ì´ì‹ì„± : ê°œë°œ ë‹¨ê³„ ë‚˜ëˆŒ í•„ìš”ì—†ì´ ì»¨í…Œì´ë„ˆì— ëª¨ë“  í™˜ê²½ êµ¬ì¶•
    3. ìƒí˜¸ìš´ìš©ì„± : ë‹¤ì–‘í•œ ë²¤ë”ì˜ ì‹œìŠ¤í…œ ë° ì˜¤í”ˆ ì†ŒìŠ¤ì™€ ì—°ê³„í•˜ì—¬ ì‚¬ìš© ê°€ëŠ¥
- ë„ì»¤ì˜ êµ¬ì¡°
    1. ì´ë¯¸ì§€

        - ë„ì»¤ë¡œ ë¦¬ëˆ…ìŠ¤ ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ë ¤ë©´ ë¯¸ë¦¬ ì œì‘ëœ ì´ë¯¸ì§€ê°€ ìˆì–´ì•¼ í•œë‹¤.

         - ì´ë¯¸ì§€ëŠ” ì—¬ëŸ¬ ê°œì˜ ë ˆì´ì–´ë¡œ ì´ë£¨ì–´ì ¸ ìˆìœ¼ë©°, ê° ë ˆì´ì–´ëŠ” Read Only ìƒíƒœë¡œ ì‚¬ìš©ëœë‹¤.

    2. ì €ì¥ì†Œ

         - ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•˜ë ¤ë©´ ì´ë¯¸ì§€ê°€ ìˆì–´ì•¼ í•˜ê³ , ì´ë¯¸ì§€ëŠ” í˜¸ìŠ¤íŠ¸ê°€ ì•„ë‹Œ ì™¸ë¶€ì— ì €ì¥ë˜ì–´ ê³µìœ í•  ìˆ˜ ìˆì–´ì•¼ í•œë‹¤. ì´ë¥¼ ì €ì¥ì†Œë¼ê³  í•¨.     ex) ë„ì»¤í—ˆë¸Œ

    3. ì»¨í…Œì´ë„ˆ

        - ì´ë¯¸ì§€ì˜ ì‹¤í–‰í˜•íƒœ 

- ë„ì»¤ì˜ ê¸°ëŠ¥
    1. ì´ë¯¸ì§€ ìƒì„±
    2. ì´ë¯¸ì§€ ê³µìœ 
    3. ì»¨í…Œì´ë„ˆ ìƒì„±
- ê°•ì‚¬ë‹˜ ë§ì”€

    ì»¨ã„´í…Œì´ë„ˆëŠ” ë°˜ë“œì‹œ ë ˆì§€ìŠ¤íŠ¸ë¦¬ì— ì €ì¥ë˜ì–´ìˆëŠ” ì´ë¯¸ì§€ë§Œì„ ë‹¤ìš´ë¡œë“œ ë°›ì•„ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤

    ì´ë¯¸ì§€ë¥¼ ê°€ì§€ê³  ê·¸ëŒ€ë¡œ í”„ë¡œì„¸ìŠ¤ë¥¼ ë„ìš´ë‹¤ ê·¸ê²Œ ë‹¤ì˜ˆìš”

    ì»¨í…Œì´ë„ˆ ìš´ì†¡í•  ë•Œ ì“°ëŠ”ê³ ... ê°™ì€ ì˜ë¯¸...

    ë¬¼ê±´ë“¤ì˜ ëª¨ì–‘ì´ í‘œì¤€í™”ë˜ì–´ìˆì§€ ì•Šê³  ë‹¤ ë‹¤ë¥´ê¸° ë•Œë¬´ì— ìƒë‹¹íˆ ë¹„íš¨ìœ¨ì ìœ¼ë¡œ ë¬¼ê±´ì„ã…‡ ìš´ì†¡í• ìˆ˜ë°–ì— ì—†ì—ˆë‹¤ ì´ê²ƒì„ ì „ì„¸ê³„ì ìœ¼ë¡œ ì»¨í…Œì´ë„ˆ ê·œê²©ì„ ì •í•˜ê³  ë‚œ í›„ì—ëŠ” í›¨ì”¬ í‘œì¤€í™”ë˜ê³  ã„±íš¨ìœ¨ì ìœ¼ë¡œ ìš´ì†¡í•  ìˆ˜ ìˆê²Œëë‹¤ ê¸°ì°¨ì— ì‹¤ì—ˆë‹¤ê°€ ë°°ì— ì‹¤ì—ˆë‹¤ê°€ ë“±ë“± ì–¼ë§ˆë“ ì§€ ìš´ì†¡ì´ ì‰½ê²Œ ì´ë¤„ì§ â†’ í‘œì¤€í™”ë¨~~

    vmê³¼ ì»¨í…Œì´ë„ˆ ì°¨ì´ ì»¨í…Œì´ë„ˆëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ë§Œ ì§‘ì–´ë„£ëŠ”ë‹¤ ì´ ì»¨í…Œì´ë„ˆë¥¼ ê°€ì§€ê³  ë‹¤ë¥¸ ìš´ì˜ì²´ì œ(ë¦¬ëˆ…ìŠ¤) ì— ê°€ì ¸ê°€ì„œ ì¨ë„ ë˜ê³ ~~ ì»¤ë„ë²„ì „ì´ ì–´ë–»ë“  ë ˆë“œí–‡ì´ë“  ìš°ë¶„ã…Œìš°ë“  í‘œì¤€í™”ëœ ì»¨í…Œì´ë„ˆë§Œì„ ê°€ì§€ê³  ë‹¤ë¥¸ ê³³ì—ê°€ì„œ ì“¸ ìˆ˜ì‡ë‹¤

    ê°œë°œìê°€ ê°œë°œí•˜ëŠ” í™˜ê²½ì€ ì „ë¶€ ë¡œì»¬ì‹œìŠ¤í…œ ì‹¤ì œ ì„œë²„ì— ë§¤ë²ˆ ì˜¬ë ¤ì„œ í™•ì¸í•  ìˆ˜ ì—†ìŒ.. ë¡œì»¬ì—ì„œ ê°œë°œí•¨ ëŒ€ë¶€ë¶„ ! í…Œã…¡íŠ¸ê³¼ì •ì„ ê±°ì¹¨ íì—ì´.. ì»¨í…Œì´ë„ˆëŠ” ìœˆë„ìš°ì—ì„œ X ë¦¬ëˆ…ìŠ¤ì—ì„œë§Œ.. ì»¨í…Œì´ë„ˆì—ëŠ” ì–´í”Œë¦¬ì¼€ì´ì…˜ë§Œì €ì¥ë˜ì–´ìˆìŠ´ ì „í˜€ë¶ˆí•„ìš”í•œ íŒŒì¼ë“¤ì€ ë„£ì–´ë†“ì§€X Vmì´ ë¹„íš¨ìœ¨ì ì¸ ì´ìœ  - ì–´í”Œë¦¬ì¼€ì´ì…˜ í•˜ë‚˜ë¥¼ ì‹¤í–‰í•˜ê¸° ìœ„í•´ ìš´ì˜ì²´ì œë¥¼ ì‹¤í–‰ì‹œì¼œì•¼í•˜ê¸° ë•Œë¬¸ì—,, ì—´ê°œì˜ vmì´ ì—´ê°œì˜ ì–´í”Œë¦¬ì¼€ì´ì…”ã…“ã„´ ëŒë¦¬ë‹ˆê¹Œ ë¹„íš¨ìœ¨,, ê·¸ë§Œí¼ì˜ ë””ìŠ¤í¬ê³µê°„ë„ ì¨ì•¼í•˜êµ¬,, ì–´í”Œë¦¬ì¼€ì´ì…”ã…“ã„´ì„ ê°€ë™í•˜ê¸° ìœ„í•´ì„œ ìš´ì˜ì²´ì œê°€ í•„ìš”í•œ ì‹œìŠ¤í…œì´ê¸° ë•Œë¬¸ì— ë¹„íš¨ìœ¨ì ì´ê³  ë¬´ê²ë‹¤.. ì»¨í…Œì´ë„ˆëŠ” í•„ìš”í•œ ì–´í”Œë¦¬ì¼€ì´ì…˜ë§Œë“¤ì–´ê°€ìˆìœ¼ë‹ˆê¹Œ ìš©ëŸ‰ë„ ì ê³  íš¨ìœ¨ì ì„ 

    ì»¨í…Œì´ë„ˆì˜ ë‹¨ì  - ìš´ì˜ì²´ì œê°€ ì£½ìœ¼ë©´ ëª¨ë“  ì–´í”Œë¦¬ì¼€ì´ì…˜ ë‹¤ ì£½ìŒ.. ë‹¤ ê°™ì´ ìš´ì˜ì²´ì œë¥¼ ì‰ì–´í•˜ê³ ìˆê¸°ë•Œë¬¸ì— 

    í´ëŸ¬ìŠ¤í„°-ì—¬ëŸ¬ëŒ€ì˜ ì‹œìŠ¤í…œì„ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œì²˜ëŸ¼ ì‘ë™ì‹œì¼œì£¼ëŠ”ê²ƒ

    ìš´ì˜ì²´ì œ ë ˆë²¨ì—ì„œ í´ëŸ¬ìŠ¤í„°ë¥¼ ì§€ì›í•˜ë©´ 

    ì»¨í…Œì´ë„ˆë¥¼ ê³ ê°€ìš©ì„±ì„ ì œê³µí•  ìˆ˜ ì—†ë‹¤. ì¼ë¶€ ì–´í”Œë¦¬ì¼€ì´ì…˜

    ì—í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ì»¨í…Œì´ë„ˆë¥¼ ë§Œë“¤ì—ˆ~

    ê³ ê°€ìš©ì„±(é«˜å¯ç”¨æ€§, HA, High Availability)ì´ë€ ì„œë²„ì™€ ë„¤íŠ¸ì›Œí¬, í”„ë¡œê·¸ë¨ ë“±ì˜ ì •ë³´ ì‹œìŠ¤í…œì´ ìƒë‹¹íˆ ì˜¤ëœ ê¸°ê°„ ë™ì•ˆ ì§€ì†ì ìœ¼ë¡œ ì •ìƒ ìš´ì˜ì´ ê°€ëŠ¥í•œ ì„±ì§ˆì„ ë§í•œë‹¤. ê³ (é«˜)ê°€ìš©ì„±ì´ë€ "ê°€ìš©ì„±ì´ ë†’ë‹¤"ëŠ” ëœ»ìœ¼ë¡œì„œ, "ì ˆëŒ€ ê³ ì¥ ë‚˜ì§€ ì•ŠìŒ"ì„ ì˜ë¯¸í•œë‹¤.

    Docker Engine

    CE(Comunity Edition) 

    Stable (3M)

    Edge (1M) â€”> Nightly Build ë¼ê³  í•´ì„œ ì½”ë“œê°€ ë°¤ì— í•œë²ˆì”© ì—…ëƒì´ ëœë‹¹

    EE(Enterprise Edition) (3M)

### ë„ì»¤ ì„¤ì¹˜

```jsx
[root@localhost ~]# yum -y update yum-utils
//yum updateí•˜ë©´ ìê¸°ìì‹ ì€ ë¹¼ê³  ë‚˜ë¨¸ì§€ë§Œ ì—…ëƒ.
//ë³„ë„ë¡œ yumë„ ì—…ë°ì´íŠ¸ í•´ì¤˜ì•¼ í•¨!!
[root@localhost ~]# yum install -y yum-utils
[root@localhost ~]# yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo
[root@localhost ~]# yum install -y docker-ce docker-ce-cli containerd.io
[root@localhost ~]# systemctl start docker
[root@localhost ~]# systemctl enable docker
[root@localhost ~]# sudo usermod -aG docker student
[root@localhost ~]# docker version
[root@localhost ~]# docker run hello-world   //hello-world - ë„ì»¤í—ˆë¸Œì—ì„œ ê°€ì ¸ì˜¨ ì»¨í…Œì´ë„ˆ ì´ë¯¸ì§€
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
0e03bdcc26d7: Pull complete 
Digest: sha256:d58e752213a51785838f9eed2b7a498ffa1cb3aa7f946dda11af39286c3db9a9 //ì´ë¯¸ì§€ ì „ì²´ì˜ í•´ì‹œê°’
Status: Downloaded newer image for hello-world:latest
//ì—¬ê¸°ì„œë¶€í„´ ì»¨í…Œì´ë„ˆê°€ ì‹¤í–‰ë˜ì–´ì„œ ë‚˜ì˜¨ ë¬¸ìì—´
Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon. 
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/

//ë‹¤ì‹œ í•œë²ˆ $docker run hello-worldë¥¼ ì¹˜ë©´, ì´ë¯¸ ê°€ì ¸ì˜¨ ì»¨í…Œì´ë„ˆì´ê¸° ë•Œë¬¸ì— ë¬¸ìì—´ë§Œ ë‚˜ì˜´.
```

# docker ëª…ë ¹

## ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ

### ë„ì»¤ í—ˆë¸Œ(Docker hub)

- ë„ì»¤ì˜ ê¸°ë³¸ ì´ë¯¸ì§€ ì €ì¥ì†Œ
- ê¸°ëŠ¥ : ì´ë¯¸ì§€ì˜ ê³µìœ 
- ì €ì¥ëœ ì´ë¯¸ì§€ì˜ ì´ë¦„ í˜•íƒœ : "ì €ì¥ì†Œì´ë¦„:íƒœê·¸"
- ê·¸ ì™¸ ì´ë¯¸ì§€ì˜ ì´ë¦„ í˜•íƒœ : "í—ˆë¸Œì˜ID/ì €ì¥ì†Œì´ë¦„
- "[https://hub.docker.com/search?q=hello-world&type=image](https://hub.docker.com/search?q=hello-world&type=image)

![Docker%2037809b0820314ded83cc46681297fd48/Screenshot_from_2020-07-14_00-26-15.png](Docker%2037809b0820314ded83cc46681297fd48/Screenshot_from_2020-07-14_00-26-15.png)

- !

    hello-world:latest 

    IMAGE:TAG

    ë°˜ë“œì‹œ ëª¨ë“  ì´ë¯¸ì§€ëŠ” í•˜ë‚˜ì´ìƒì˜ íƒœê·¸ê°€ ì¡´ì¬í•¨

    ì´ë¯¸ì§€ì— íƒœê·¸ë¥¼ ë³„ë„ë¡œ ì§€ì •í•˜ì§€ ì•Šìœ¼ë©´ latest ë¼ëŠ” íƒœê·¸ê°€ ë¶™ìŒ.

    ì´ë¯¸ì§€ëŠ” ê³„ì¸µì ìœ¼ë¡œ ì¡´ì¬í•œë‹¤. ì—¬ëŸ¬ê°œì˜ ìŠ¤íƒì´ ìŒ“ì—¬ìˆë‹¤.

### ì´ë¯¸ì§€ ê²€ìƒ‰ ë° ë‹¤ìš´ë¡œë“œ

- docker search : ì´ë¯¸ì§€ ê²€ìƒ‰
- docker pull : ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ

### ì´ë¯¸ì§€ ê´€ë¦¬

- docker images (docker image ls) : ì´ë¯¸ì§€ ëª©ë¡
- docker rmi : ì´ë¯¸ì§€ ì‚­ì œ
- docker inspect : ì´ë¯¸ì§€ë¿ë§Œ ì•„ë‹ˆë¼ ë„ì»¤ ì˜¤ë¸Œì íŠ¸ì˜ ì •ë³´ë¥¼ ìì„¸íˆ í™•ì¸
- docker save -o : í˜¸ìŠ¤íŠ¸ì— ì €ì¥ëœ ì´ë¯¸ì§€ë¥¼ ì•„ì¹´ì´ë¸Œ íŒŒì¼ë¡œ ë³µì‚¬
- docker load -i : -i ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ ì§€ì •ëœ ì•„ì¹´ì´ë¸Œ íŒŒì¼ì„ ë¶ˆëŸ¬ì˜´

```jsx
// docker save/load
[root@localhost ~]# docker save -o img.tar centos:latest httpd:latest
[root@localhost ~]# tar tf img.tar
[root@localhost ~]# docker rmi centos:latest httpd:latest
[root@localhost ~]# docker images
[root@localhost ~]# docker load -i img.tar
[root@localhost ~]# docker images
```

- !
    - cgroup
    - namespace
    - rayered FS - AUFS (Another Union FS)

    í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ëª©ë¡

    docker

    Attach: -i -t ( ubuntu, centos )

    Detach: -d ( httpd )

    Attach ëª¨ë“œì™€ Detach ëª¨ë“œë¥¼ êµ¬ë³„í•˜ëŠ” ë²• ê¼­ ì•Œì•„ì•¼í•¨

    docker ( container ) attach

    docker ( container ) exec

    ```jsx
    [root@localhost ~]# docker container run -it ad bash
    ```

### ì»¨í…Œì´ë„ˆ ì‹¤í–‰

**ì»¨í…Œì´ë„ˆ ìƒì„± ë° í™•ì¸**

- docker ps : í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¶œë ¥
- docker ps -a : í˜„ì¬ í˜¸ìŠ¤íŠ¸ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆë¥¼ ì¶œë ¥
- docker create : ì»¨í…Œì´ë„ˆ ìƒì„± ( ì‹¤í–‰ X )

    -i : ì—°ê²°ë˜ì–´ìˆì§€ ì•Šì•„ë„ í‘œì¤€ì…ë ¥ì„ ìœ ì§€

    -t : ê°€ìƒ í„°ë¯¸ë„ ì§€ì •

    â€”name : ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •

- docker start : ì¤‘ì§€ë˜ì–´ ìˆê±°ë‚˜ ìƒì„±ëœ ì»¨í…Œì´ë„ˆ ì‹œì‘

    -i : ì»¨í…Œì´ë„ˆì˜ í‘œì¤€ì…ë ¥ì— ì—°ê²°

    -a : ì»¨í…Œì´ë„ˆì˜ í‘œì¤€ì¶œë ¥/ì—ëŸ¬ì— ì—°ê²°

    -ai : ì‰˜ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ê³  ìˆëŠ” ì»¨í…Œì´ë„ˆì— ë°”ë¡œ ì ‘ê·¼í•˜ê¸°

- docker run : ì»¨í…Œì´ë„ˆ ë°”ë¡œ ì‹¤í–‰

    -i : ì—°ê²°ë˜ì–´ìˆì§€ ì•Šì•„ë„ í‘œì¤€ì…ë ¥ì„ ìœ ì§€

    -t : ê°€ìƒ í„°ë¯¸ë„ ì§€ì •

    -d : ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ ë¶„ë¦¬ëª¨ë“œë¡œ ì‹¤í–‰

    ì´ë¯¸ì§€ì˜ CMDì— ì„œë¹„ìŠ¤ ë˜ëŠ” ë°ëª¬ì´ ì§€ì •ë˜ì–´ìˆëŠ” ê²½ìš° ì‚¬ìš©

    ë°±ê·¸ë¼ìš´ë“œì—ì„œë„ ì‹¤í–‰ì´ ê°€ëŠ¥í•˜ë„ë¡ í•´ì£¼ëŠ” ì˜µì…˜

    â€”name : ì»¨í…Œì´ë„ˆ ì´ë¦„ ì§€ì •

    -it : ì‰˜ í”„ë¡œê·¸ë¨ì´ ì§€ì •ëœ ì´ë¯¸ì§€ë¡œ ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰

- docker stats : ì»¨í…Œì´ë„ˆì˜ ì‹¤ì‹œê°„ ìƒíƒœ í™•ì¸

    -a : ëª¨ë“  ì»¨í…Œì´ë„ˆ í™•ì¸

    â€”no-stream : ìŠ¤íŠ¸ë¦¬ë° ì¶œë ¥ í•˜ì§€ ì•ŠìŒ

**ì»¨í…Œì´ë„ˆ ì¤‘ì§€ ë° ì œê±°**

- docker stop : ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì¤‘ì§€
- docker restart : ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘
- docker rm : ì‹¤í–‰ í•˜ê³  ìˆì§€ ì•Šì€ ì»¨í…Œì´ë„ˆ ì‚­ì œ

    -f : ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆ ì‚­ì œ

**ì»¨í…Œì´ë„ˆ ì‹¤í–‰ ì‹œ ìœ ìš©í•œ ì„¤ì •**

- docker run -e : ì»¨í…Œì´ë„ˆì˜ í™˜ê²½ë³€ìˆ˜ ì„¤ì •

```jsx
$ docker run -it --name os3 -e "LAB=docker" centos:latest

```

- docker run â€”cpus : CPU ì œí•œ
- docker container prune : í˜„ì¬ ì‹¤í–‰ì¤‘ì¸ ì»¨í…Œì´ë„ˆì™¸ì— ë‹¤ë¥¸ ì»¨í…Œì´ë„ˆ ë‹¤ ì‚­ì œ

```jsx
[root@localhost ~]# docker container prune
```

- !

    create â€”> start â€”> pause â€”> unpause â€”> stop â€”> rm

    run â€”â€”â€”â€”â€”â€”>                                  â€”> rm -f

    run/create -it / -itd / -d

    Container Image

    Registry(docker hub) â€”> Local(pull)

    Layered File System(FS)

    AUFS   â€”â€”>    AUFS   â€”â€”>  OverlayFS

                        DM-LVM

    docker stats : HW Resource Usage

    docker top : Process List

    docker attach : Exitst STDIN,STDOUT

    docker exec : Additional Application(Process)

### ì»¨

execì€ ìƒˆë¡œìš´ ì‰˜ì„ ë„ì›€  (ì‹¤í–‰) ì‰˜ì´ ì—†ì–´ë„ ë¨

attachëŠ” ì‹¤í–‰ì¤‘ì¸ ìƒíƒœì—ì„œë§Œ í•  ìˆ˜ìˆìŒ     (ì˜ì¡´ì ì„. ë¶™ëŠ”ë‹¤)

ê°€ ì‰˜ì„ ë„ìš¸ ìˆ˜ ìˆëŠ”ì• ëŠ” í•œì • ë˜ì–´ìˆìŒ  ì‰˜ì´ ìˆëŠ”ì• í•œí…Œ ê°€ì„œ ë¶™ëŠ”ë‹¤..... 

**ì»¨í…Œì´ë„ˆì— íŒŒì¼ ë³µì‚¬ ë° í™•ì¸**

- docker cp : í˜¸ìŠ¤íŠ¸ì˜ íŒŒì¼ì„ ì»¨í…Œì´ë„ˆë¡œ ë³µì‚¬í•˜ê±°ë‚˜ ì»¨í…Œì´ë„ˆì˜ íŒŒì¼ì„ í˜¸ìŠ¤íŠ¸ë¡œ ë³µì‚¬

```jsx
[root@localhost ~]# docker cp index.html web:/usr/local/apache2/htdocs/
[root@localhost ~]# docker exec -it web bash
root@9737f7691661:/usr/local/apache2# cat htdocs/index.html 
hello world
```

- docker diff : ì»¨í…Œì´ë„ˆì—ì„œ íŒŒì¼ì˜ ë³€ê²½ ìƒíƒœë¥¼ ì²´í¬

    -A : íŒŒì¼ì´ ì¶”ê°€ë¨

    -C : íŒŒì¼ì´ ë³€ê²½ë¨

    -D : íŒŒì¼ì´ ì‚­ì œë¨

## ë„ì»¤ì—ì„œ ë°ì´í„° ê´€ë¦¬

### Bind Mount

- í˜¸ìŠ¤íŠ¸ì˜ íŠ¹ì • ë””ë ‰í† ë¦¬ì™€ ì»¨í…Œì´ë„ˆì˜ ë””ë ‰í† ë¦¬ë¥¼ ì—°ê²°í•˜ëŠ” ë°©ì‹

```jsx
[root@localhost ~]# mkdir ~/bm1
[root@localhost ~]# touch ~/bm1/filea.txt
[root@localhost ~]# docker run -itd --name os3 -v ~/bm1:/tmp/mount centos:latest
2093866a5df37174edc2635098bfdddfde96c77f1051e4db2a0563a949ccc6d7
[root@localhost ~]# docker exec os3 ls /tmp/mount
filea.txt
```

## ë„¤íŠ¸ì›Œí¬ ìœ í˜•

### bridge

- ì»¨í…Œì´ë„ˆê°€ ì‚¬ìš©í•˜ëŠ” í”„ë¼ì´ë¹— ë„¤íŠ¸ì›Œí¬
- ê°™ì€ bridgeì— ì—°ê²°ë˜ì–´ ìˆìœ¼ë©´ ì»¨í…Œì´ë„ˆì˜ IP ì£¼ì†Œë¡œ í†µì‹ í•  ìˆ˜ ìˆë‹¤.

```jsx
$ docker network ls
$ docker inspect bridge
$ docker network create --subnet 192.168.100.0/24 --gateway 192.168.100.254 net1
$ docker network ls
$ docker run -itd --name os5 --network net1 centos:latest
```

### host

- í˜¸ìŠ¤íŠ¸ì—ì„œ ì»¨í…Œì´ë„ˆì˜ ë„¤íŠ¸ì›Œí¬ ê²©ë¦¬ë¥¼ í•´ì œí•˜ì—¬ í˜¸ìŠ¤íŠ¸ì˜ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ê³µìœ í•´ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ë²•
- ì»¨í…Œì´ë„ˆëŠ” í˜¸ìŠ¤íŠ¸ ì…ì¥ì—ì„œ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì´ê¸° ë•Œë¬¸ì— ê°€ìƒë¨¸ì‹ ê³¼ ë‹¤ë¥´ê²Œ ë„¤íŠ¸ì›Œí¬ ì •ë³´ë¥¼ ê³µìœ í•  ìˆ˜ ìˆë‹¤.

```jsx
$ docker run -d --name web4 --network host httpd:latest
$ curl localhost
```

## ì»¨í…Œì´ë„ˆì˜ í†µì‹ 

### ë§í¬(link)

- ì»¨í…Œì´ë„ˆë¼ë¦¬ ì„œë¡œ í†µì‹ í•˜ë ¤ë©´ ê¸°ë³¸ì ìœ¼ë¡œ ê°™ì€ bridge ë“œë¼ì´ë²„ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•œë‹¤.
- ì¢…ì¢… ì»¨í…Œì´ë„ˆ ê°„ ì´ë¦„ ë˜ëŠ” ë³„ì¹­ìœ¼ë¡œ í†µì‹ í•´ì•¼ í•˜ëŠ” ê²½ìš°ì—ë„ ì‚¬ìš©í•¨

```jsx
// ì»¨í…Œì´ë„ˆ ì´ë¦„ ì‚¬ìš©
$ docker run -itd --name os6 --link web3 centos:latest
$ docker exec os6 curl web3
$ docker exec os6 cat /etc/hosts
```

```jsx
// ì»¨í…Œì´ë„ˆ ë³„ëª… ì‚¬ìš©
$ docker run -itd --name os7 --link web3:apache centos:latest
$ docker exec os7 curl apache
$ docker exec os7 cat /etc/hosts
```

### ğŸ’«í¬íŠ¸ í¬ì›Œë”©(docker run -p)

- ë¸Œë¦¿ì§€ ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆëŠ” ì™¸ë¶€ì—ì„œ ì ‘ê·¼í•  ë•Œ í¬íŠ¸ í¬ì›Œë”© í•´ì•¼í•œë‹¤.
- í¬íŠ¸ í¬ì›Œë”©ì´ ì„¤ì •ë˜ë©´ ë¡œì»¬í˜¸ìŠ¤íŠ¸ ë¿ë§Œ ì•„ë‹ˆë¼ ì´ í˜¸ìŠ¤íŠ¸ì— ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ëª¨ë“  ì‹œìŠ¤í…œì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤.

```jsx
// web5 ì»¨í…Œì´ë„ˆë¥¼ ì‹¤í–‰í•˜ë©´ì„œ í˜¸ìŠ¤íŠ¸ì˜ 8080í¬íŠ¸ë¡œ ì ‘ê·¼í–ˆì„ ë•Œ ì»¨í…Œì´ë„ˆì˜ 80ë²ˆ í¬íŠ¸ë¡œ ì „ë‹¬í•˜ëŠ” í¬íŠ¸í¬ì›Œë”© ì„¤ì •
$ docker run -d --name web5 -p 8080:80 httpd:latest
1275582a83e20a3cdd99fab741ce3655c842644bdb33f4e052a6c96ac1dcbb1a
$ docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
1275582a83e2        httpd:latest        "httpd-foreground"       5 seconds ago       Up 4 seconds        0.0.0.0:8080->80/tcp   web5
$ curl localhost:8080
<html><body><h1>It works!</h1></body></html>
// 0.0.0.0 - í˜¸ìŠ¤íŠ¸ì˜ IP
// :8080 - í˜¸ìŠ¤íŠ¸ì˜ í¬íŠ¸
```

### ì›Œë“œí”„ë ˆìŠ¤

- [https://hub.docker.com/_/wordpress](https://hub.docker.com/_/wordpress)

```jsx
$ docker pull wordpress
$ docker run -d --name wp-db -v wp-db-vol:/var/lib/mysql -e MYSQL_ROOT_PASSWORD=dkagh1. -e MYSQL_USER=wp-admin -e MYSQL_PASSWORD=dkagh1. -e MYSQL_DATABASE=wp mysql:5.7
$ docker ps
$ docker run -d --name wp-web -v wp-web-vol:/var/www/html --link wp-db -e WORDPRESS_DB_HOST=wp-db -e WORDPRESS_DB_USER=wp-admin -e WORDPRESS_DB_PASSWORD=dkagh1. -e WORDPRESS_DB_NAME=wp -p 80:80 wordpress
// í•˜êµ¬ ì´ì œ ë„ì»¤ ì•„ì´í”¼ë¡œ ì›¹ì— ì ‘ì†í•˜ë©´ ì›Œë“œí”„ë ˆìŠ¤ ì§œì”!!!
```

![Docker%2037809b0820314ded83cc46681297fd48/Screenshot_from_2020-07-14_14-56-34.png](Docker%2037809b0820314ded83cc46681297fd48/Screenshot_from_2020-07-14_14-56-34.png)

## ì´ë¯¸ì§€ ì œì‘ ë° ì—…ë¡œë“œ

### ì´ë¯¸ì§€ ì œì‘

- ìƒì„±ëœ ì»¨í…Œì´ë„ˆì—ì„œ ì´ë¯¸ì§€ë¥¼ ìƒì„±
- ì»¨í…Œì´ë„ˆì˜ íŒŒì¼ ì‹œìŠ¤í…œì„ ì¶”ì¶œí•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ìƒì„±

```jsx
$ docker run -it centos
$ docker commit -c 'CMD ["httpd","-D","FOREGROUND"]' 80 centos-web:v4
$ docker run -d centos-web:v4
```

## DockerFile

- ë„ì»¤ëŠ” Dockerfileì„ ì‚¬ìš©í•˜ì—¬ ì´ë¯¸ì§€ë¥¼ ì œì‘í•  ìˆ˜ ìˆë‹¤.
- ì½”ë“œí˜•íƒœì˜ í…ìŠ¤íŠ¸ ë¬¸ì„œ
    - Dockerfile ì§€ì‹œì–´

        [Untitled](https://www.notion.so/6d666378d1a046fdac2a544fefdb29b2)

```jsx
[root@localhost ~]# vi hello.c
#include <stdio.h>

int main() {
	printf("Hello World\n");
	return 0;
}
[root@localhost ~]# sudo yum -y install gcc
[root@localhost ~]# gcc hello.c -o hello
[root@localhost ~]# ./hello
Hello World

[root@localhost ~]# sudo yum install glibc-static
[root@localhost ~]# gcc hello.c --static -o hello_static
[root@localhost ~]# ls -lh hello hello_static

```

```jsx
[root@localhost ~]# docker exec -it 2a bash
```